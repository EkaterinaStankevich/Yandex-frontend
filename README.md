# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание архитектуры проекта

### Базовые классы

#### EventEmitter
Класс EventEmitter описывает работу событий. Содержит функции:
- on — Установка слушателей событий.
- off — Удаление слушателей событий.
- emit — Вызов слушателей при возникновении события.
- onAll — Подписка на все события.
- offAll — Удаление всех слушателей.

#### Api
Класс Api описывает взаимодействие с сервером. Содержит функции:
- get — GET-запросы.
- post — POST, PUT, DELETE запросы.

#### BasketModel
Класс BasketModel описывает состоянием корзины. Содержит функции:
- add — Добавление товара в корзину.
- remove — Удаление товара из корзины.
- _changed — Уведомление об изменении состояния корзины.

#### CatalogModel
Класс CatalogModel описывает данными каталога товаров. Содержит функции:
- load — Загрузка данных каталога с сервера.

#### OrderModel
Класс OrderModel описывает данными заказа. Содержит функции:
- setPaymentMethod — Указание способа оплаты.
- setAddress — Указание адреса доставки.
- setContactInfo — Указание контактной информации.

### Компоненты

#### BasketView
Компонент BasketView описывает отображение корзины товаров. Содержит функции:
- render — Отрисовка списка товаров в корзине.

#### CatalogView
Компонент CatalogView описывает отображение каталога товаров. Содержит функции:
- render — Отрисовка списка товаров в каталоге.

#### OrderView
Компонент OrderView описывает отображение формы заказа. Содержит функции:
- render — Отрисовка данных заказа (способ оплаты, адрес доставки).

### Контроллеры

#### BasketController
Контроллер BasketController описывает взаимодействием между BasketModel и BasketView. Содержит функции:
- addItem — Добавление товара в корзину.
- removeItem — Удаление товара из корзины.

#### CatalogController
Контроллер CatalogController описывает взаимодействием между CatalogModel и CatalogView. Содержит функции:
- loadCatalog — Загрузка и отображение каталога товаров.

#### OrderController
Контроллер OrderController описывает взаимодействием между OrderModel и OrderView. Содержит функции:
- submitOrder — Обработка данных заказа.

### Типы данных

#### Product
Описание товара:
- id — Уникальный идентификатор товара.
- category — Категория товара.
- title — Название товара.
- image — Ссылка на изображение товара.
- price — Цена товара.
- description — Описание товара.

#### ApiResponse
Ответ от API:
- total — Общее количество товаров.
- items — Массив товаров (принимает дженерик тип).

#### Basket
Товар в корзине:
- id — Уникальный идентификатор товара.
- title — Название товара.
- price — Цена товара.
- index — Порядковый номер товара в корзине.

#### Order
Данные заказа:
- payment — Способ оплаты.
- address — Адрес доставки.
- email — Email для связи.
- phone — Телефон для связи.

### Взаимодействие компонентов

#### Каталог товаров
- Пользователь просматривает каталог товаров через CatalogView.
- При выборе товара CatalogController добавляет его в корзину через BasketModel.

#### Корзина товаров
- Пользователь видит список товаров в корзине через BasketView.
- При изменении состояния корзины BasketModel уведомляет BasketView через события.

#### Оформление заказа
- Пользователь заполняет данные заказа через OrderView.
- OrderController обрабатывает данные и передает их в OrderModel.

### Используемые паттерны

#### MVP (Model-View-Presenter)
- Model: Управляет данными (BasketModel, CatalogModel, OrderModel).
- View: Отображает данные (BasketView, CatalogView, OrderView).
- Presenter/Controller: Связывает Model и View (BasketController, CatalogController, OrderController).

#### EventEmitter
Используется для слабой связности между компонентами. Компоненты общаются через события, а не напрямую.

### Заключение
Проект "Веб-ларек" представляет собой простое веб-приложение для покупки товаров. Архитектура проекта построена на основе паттерна MVP. Взаимодействие между компонентами осуществляется через события.